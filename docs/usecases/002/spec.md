# UC-002: ì½˜ì„œíŠ¸ ìƒì„¸ ì •ë³´ ì¡°íšŒ

## ê°œìš”
ì‚¬ìš©ìê°€ ì½˜ì„œíŠ¸ ëª©ë¡ì—ì„œ íŠ¹ì • ì½˜ì„œíŠ¸ë¥¼ ì„ íƒí•˜ì—¬ ìƒì„¸ ì •ë³´(ì œëª©, ì„¤ëª…, ë‚ ì§œ, ì¥ì†Œ, ì¢Œì„ ë“±ê¸‰ ì •ë³´ ë“±)ë¥¼ ì¡°íšŒí•˜ê³ , ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ì°œí•˜ê¸° ê¸°ëŠ¥ì„ í™œìš©í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

## Primary Actor
- ì¼ë°˜ ì‚¬ìš©ì (íšŒì› / ë¹„íšŒì›)

## Precondition
- ì‚¬ìš©ìê°€ ë©”ì¸ í˜ì´ì§€ì˜ ì½˜ì„œíŠ¸ ëª©ë¡ í™”ë©´ì— ì ‘ê·¼í•œ ìƒíƒœ
- ì¡°íšŒí•˜ë ¤ëŠ” ì½˜ì„œíŠ¸ê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì¡´ì¬í•¨

## Trigger
ì‚¬ìš©ìê°€ ë©”ì¸ í˜ì´ì§€ì˜ ì½˜ì„œíŠ¸ ëª©ë¡ì—ì„œ íŠ¹ì • ì½˜ì„œíŠ¸ ì•„ì´í…œì„ í´ë¦­

## Main Scenario

### 1. ì½˜ì„œíŠ¸ ì„ íƒ
**User â†’ FE**
- ì‚¬ìš©ìê°€ ë©”ì¸ í˜ì´ì§€ì—ì„œ ì½˜ì„œíŠ¸ ì¹´ë“œë¥¼ í´ë¦­

**FE â†’ FE**
- ì„ íƒëœ ì½˜ì„œíŠ¸ì˜ ê³ ìœ  ì‹ë³„ì(concert_id)ë¥¼ ì¶”ì¶œ
- ì½˜ì„œíŠ¸ ìƒì„¸ í˜ì´ì§€ë¡œ ë¼ìš°íŒ… (`/concerts/{concert_id}`)

### 2. ìƒì„¸ ì •ë³´ ìš”ì²­
**FE â†’ BE**
- `GET /api/concerts/{concert_id}` ìš”ì²­
- ë¡œê·¸ì¸ ìƒíƒœì¸ ê²½ìš° ì¸ì¦ í† í°ì„ í—¤ë”ì— í¬í•¨

**BE â†’ Database**
- `concerts` í…Œì´ë¸”ì—ì„œ í•´ë‹¹ `id`ë¡œ ì½˜ì„œíŠ¸ ê¸°ë³¸ ì •ë³´ ì¡°íšŒ
- `concert_seat_categories` í…Œì´ë¸”ì—ì„œ í•´ë‹¹ ì½˜ì„œíŠ¸ì˜ ì¢Œì„ ë“±ê¸‰ ì •ë³´ ì¡°íšŒ
- `concert_seats` í…Œì´ë¸”ì—ì„œ ë“±ê¸‰ë³„ ì¢Œì„ ìˆ˜ ì§‘ê³„
- ë¡œê·¸ì¸ëœ ê²½ìš°, `favorite_concerts` í…Œì´ë¸”ì—ì„œ `(user_id, concert_id)` ì¡´ì¬ ì—¬ë¶€ í™•ì¸

**Database â†’ BE**
- ì¡°íšŒ ê²°ê³¼ ë°˜í™˜

**BE â†’ FE**
- ìƒì„¸ ì •ë³´ ë° ì°œ ì—¬ë¶€ë¥¼ í¬í•¨í•œ JSON ì‘ë‹µ
```typescript
{
  id: string;
  title: string;
  artist?: string;
  description?: string;
  thumbnailUrl: string;
  venueName?: string;
  venueAddress?: string;
  startDate?: string;
  endDate?: string;
  durationMinutes?: number;
  ageRating?: string;
  notice?: string;
  status: "ON_SALE" | "CLOSE_SOON" | "SOLD_OUT" | "ENDED";
  seatCategories: Array<{
    id: string;
    name: string;
    displayColor: string;
    price: number;
    description?: string;
    totalSeats: number;
    availableSeats: number;
  }>;
  isFavorite: boolean;
}
```

### 3. í™”ë©´ ë Œë”ë§
**FE â†’ User**
- ìƒì„¸ í˜ì´ì§€ UIì— ë°ì´í„° í‘œì‹œ
  - ì½˜ì„œíŠ¸ ì œëª©, ì¸ë„¤ì¼ ì´ë¯¸ì§€, ì„¤ëª…
  - ì•„í‹°ìŠ¤íŠ¸ ì •ë³´ (ìˆëŠ” ê²½ìš°)
  - ê³µì—° ë‚ ì§œ (ì‹œì‘/ì¢…ë£Œ), ê³µì—° ì‹œê°„, ì¥ì†Œ (ì´ë¦„/ì£¼ì†Œ)
  - ê´€ëŒ ë“±ê¸‰, ê³µì§€ì‚¬í•­
  - íŒë§¤ ìƒíƒœ ë±ƒì§€ (ON_SALE, CLOSE_SOON, SOLD_OUT, ENDED)
  - ì¢Œì„ ë“±ê¸‰ë³„ ì •ë³´ (ë“±ê¸‰ëª…, ìƒ‰ìƒ, ê°€ê²©, ì „ì²´/ì”ì—¬ ì¢Œì„)
- ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ ì°œí•˜ê¸° ë²„íŠ¼ í‘œì‹œ
  - ë¡œê·¸ì¸ O: í™œì„±í™” (ì°œ ìƒíƒœì— ë”°ë¼ ì•„ì´ì½˜ ë³€ê²½)
  - ë¡œê·¸ì¸ X: ë¹„í™œì„±í™” ë˜ëŠ” í´ë¦­ ì‹œ ë¡œê·¸ì¸ ìœ ë„
- "ì˜ˆë§¤í•˜ê¸°" ë²„íŠ¼ í‘œì‹œ (statusì— ë”°ë¼ í™œì„±í™”/ë¹„í™œì„±í™”)

## Edge Cases

### E1. ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì½˜ì„œíŠ¸ ID
**Scenario**: ìœ íš¨í•˜ì§€ ì•Šê±°ë‚˜ ì‚­ì œëœ ì½˜ì„œíŠ¸ IDë¡œ ì ‘ê·¼
```
User â†’ FE: /concerts/{invalid_id} ì ‘ê·¼
FE â†’ BE: GET /api/concerts/{invalid_id}
BE â†’ FE: 404 Not Found
FE â†’ User: "ì½˜ì„œíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ
           ë˜ëŠ” 404 í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
```

**ì²˜ë¦¬**:
- BE: `{ error: "CONCERT_NOT_FOUND", message: "ì½˜ì„œíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" }` ë°˜í™˜
- FE: ì—ëŸ¬ í˜ì´ì§€ í‘œì‹œ ë˜ëŠ” ë©”ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ìœ ë„

### E2. API í˜¸ì¶œ ì‹¤íŒ¨ (ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ì„œë²„ ì—ëŸ¬)
**Scenario**: ì„œë²„ í†µì‹  ì¤‘ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë˜ëŠ” 5xx ì—ëŸ¬ ë°œìƒ
```
User â†’ FE: ì½˜ì„œíŠ¸ í´ë¦­
FE â†’ BE: GET /api/concerts/{id}
BE â†’ FE: 500 Internal Server Error ë˜ëŠ” íƒ€ì„ì•„ì›ƒ
FE â†’ User: "ì¼ì‹œì ì¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”"
           ì¬ì‹œë„ ë²„íŠ¼ í‘œì‹œ
```

**ì²˜ë¦¬**:
- FE: ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬ ë° ì—ëŸ¬ ë°”ìš´ë”ë¦¬ í‘œì‹œ
- ì‚¬ìš©ìì—ê²Œ ì¬ì‹œë„ ì˜µì…˜ ì œê³µ

### E3. ë¡œê·¸ì¸ ì„¸ì…˜ ë§Œë£Œ
**Scenario**: ë¡œê·¸ì¸ ìƒíƒœë¡œ ì ‘ê·¼í–ˆìœ¼ë‚˜ ì„¸ì…˜ì´ ë§Œë£Œëœ ê²½ìš°
```
User â†’ FE: ì½˜ì„œíŠ¸ ìƒì„¸ ì¡°íšŒ (ë¡œê·¸ì¸ ìƒíƒœ)
FE â†’ BE: GET /api/concerts/{id} (expired token)
BE â†’ FE: 401 Unauthorized
FE â†’ User: ì°œ ìƒíƒœëŠ” ë¡œê·¸ì¸ í•„ìš”ë¡œ í‘œì‹œ
           (ìƒì„¸ ì •ë³´ëŠ” ì •ìƒ í‘œì‹œ)
```

**ì²˜ë¦¬**:
- BE: ì¸ì¦ ì‹¤íŒ¨ ì‹œì—ë„ ê³µê°œ ì •ë³´ëŠ” ë°˜í™˜í•˜ë˜ `isFavorite`ëŠ” `false` ì²˜ë¦¬
- FE: ì°œí•˜ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ë¡œê·¸ì¸ ëª¨ë‹¬ í‘œì‹œ

### E4. ë°ì´í„° ë¶€ë¶„ ë¡œë”© ì‹¤íŒ¨
**Scenario**: ë©”ì¸ ì •ë³´ëŠ” ë¡œë“œë˜ì—ˆìœ¼ë‚˜ ì¢Œì„ ì •ë³´ ë¡œë”© ì‹¤íŒ¨
```
User â†’ FE: ì½˜ì„œíŠ¸ í´ë¦­
FE â†’ BE: GET /api/concerts/{id}
BE: concerts ì¡°íšŒ ì„±ê³µ, concert_seat_categories ì¡°íšŒ ì‹¤íŒ¨
BE â†’ FE: 200 OK (seatCategories: [])
FE â†’ User: ì½˜ì„œíŠ¸ ê¸°ë³¸ ì •ë³´ í‘œì‹œ
           ì¢Œì„ ì •ë³´ ì˜ì—­ì— "ì¢Œì„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤" í‘œì‹œ
```

**ì²˜ë¦¬**:
- BE: ë¶€ë¶„ ì‹¤íŒ¨ ì‹œ ê°€ëŠ¥í•œ ë°ì´í„°ë§Œ ë°˜í™˜
- FE: ì„ íƒì ìœ¼ë¡œ ë°ì´í„° ì˜ì—­ í‘œì‹œ

## Business Rules

### BR-1: ë¡œê·¸ì¸ ìƒíƒœì™€ ì°œí•˜ê¸° ê¸°ëŠ¥
- ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìëŠ” ì°œí•˜ê¸° ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë˜ê±°ë‚˜ í´ë¦­ ì‹œ ë¡œê·¸ì¸ ëª¨ë‹¬ í‘œì‹œ
- ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ ì°œí•˜ê¸° ê¸°ëŠ¥ ì‚¬ìš© ê°€ëŠ¥

### BR-2: ë°ì´í„° ì¼ê´€ì„±
- ì½˜ì„œíŠ¸ ì‚­ì œ ì‹œ ì—°ê´€ëœ ì¢Œì„ ì •ë³´ë„ cascade ì‚­ì œ (`concert_seat_categories`, `concert_seats`)
- ì°œí•˜ê¸° ì •ë³´ëŠ” `favorite_concerts`ì—ì„œ (user_id, concert_id) ìœ ë‹ˆí¬ ì œì•½

### BR-3: ì¢Œì„ ê°€ìš©ì„± í‘œì‹œ
- ì¢Œì„ ë“±ê¸‰ë³„ ì”ì—¬ ì¢Œì„ ìˆ˜ëŠ” ì‹¤ì‹œê°„ ì§‘ê³„
  - ì „ì²´ ì¢Œì„ ìˆ˜ - í™œì„± ì˜ˆì•½ëœ ì¢Œì„ ìˆ˜
  - `is_active = true`ì¸ `reservation_order_seats` ì œì™¸

### BR-4: ì˜ˆë§¤ ê°€ëŠ¥ ìƒíƒœ
- ì¢Œì„ ì •ë³´ê°€ ì—†ê±°ë‚˜ ëª¨ë“  ì¢Œì„ì´ ë§¤ì§„ëœ ê²½ìš°ì—ë„ ìƒì„¸ ì •ë³´ëŠ” í‘œì‹œ
- "ì˜ˆë§¤í•˜ê¸°" ë²„íŠ¼ì€ ë¹„í™œì„±í™”í•˜ê³  "ë§¤ì§„" ìƒíƒœ í‘œì‹œ

## Sequence Diagram

```plantuml
@startuml
actor User
participant FE
participant BE
database Database

User -> FE: ì½˜ì„œíŠ¸ ì¹´ë“œ í´ë¦­
activate FE

FE -> FE: concert_id ì¶”ì¶œ
FE -> FE: /concerts/{concert_id}ë¡œ ë¼ìš°íŒ…

FE -> BE: GET /api/concerts/{concert_id}\n[Authorization: Bearer token]
activate BE

BE -> Database: SELECT * FROM concerts WHERE id = ?
activate Database
Database --> BE: ì½˜ì„œíŠ¸ ì •ë³´
deactivate Database

BE -> Database: SELECT * FROM concert_seat_categories\nWHERE concert_id = ?
activate Database
Database --> BE: ì¢Œì„ ë“±ê¸‰ ëª©ë¡
deactivate Database

BE -> Database: SELECT category_id, COUNT(*) FROM concert_seats\nWHERE concert_id = ? AND is_available = true\nGROUP BY category_id
activate Database
Database --> BE: ë“±ê¸‰ë³„ ê°€ìš© ì¢Œì„ ìˆ˜
deactivate Database

alt ë¡œê·¸ì¸ ìƒíƒœì¸ ê²½ìš°
    BE -> Database: SELECT * FROM favorite_concerts\nWHERE user_id = ? AND concert_id = ?
    activate Database
    Database --> BE: ì°œ ì—¬ë¶€
    deactivate Database
end

BE --> FE: 200 OK\n{ concert ìƒì„¸ ì •ë³´ + ì¢Œì„ ë“±ê¸‰ + ì°œ ì—¬ë¶€ }
deactivate BE

FE -> FE: ë°ì´í„° íŒŒì‹± ë° ìƒíƒœ ì €ì¥
FE --> User: ì½˜ì„œíŠ¸ ìƒì„¸ í˜ì´ì§€ ë Œë”ë§\n(ì œëª©, ì´ë¯¸ì§€, ì¢Œì„ ì •ë³´, ì°œ ë²„íŠ¼, ì˜ˆë§¤ ë²„íŠ¼)
deactivate FE

@enduml
```

## API Specification

### Request
```http
GET /api/concerts/{concert_id}
Authorization: Bearer {access_token} (optional)
```

### Response (Success)
```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "title": "ì œë¯¸ë‹ˆ ì½˜ì„œíŠ¸ 2025",
    "artist": "GEMINI",
    "description": "ì œë¯¸ë‹ˆì˜ íŠ¹ë³„í•œ ê³µì—°",
    "thumbnailUrl": "https://picsum.photos/800/400",
    "venueName": "ì˜¬ë¦¼í”½ê³µì› ì²´ì¡°ê²½ê¸°ì¥",
    "venueAddress": "ì„œìš¸ì‹œ ì†¡íŒŒêµ¬ ì˜¬ë¦¼í”½ë¡œ 424",
    "startDate": "2025-06-15T19:00:00Z",
    "endDate": "2025-06-15T21:30:00Z",
    "durationMinutes": 150,
    "ageRating": "12ì„¸ ì´ìƒ",
    "notice": "ê³µì—° ì‹œì‘ 30ë¶„ ì „ê¹Œì§€ ì…ì¥ ì™„ë£Œ ë°”ëë‹ˆë‹¤.",
    "status": "ON_SALE",
    "seatCategories": [
      {
        "id": "cat-001",
        "name": "VIP",
        "displayColor": "#FFD700",
        "price": 150000,
        "description": "ìµœì „ë°© VIPì„",
        "totalSeats": 100,
        "availableSeats": 42
      },
      {
        "id": "cat-002",
        "name": "Rì„",
        "displayColor": "#FF6B6B",
        "price": 120000,
        "description": null,
        "totalSeats": 200,
        "availableSeats": 180
      }
    ],
    "isFavorite": false
  }
}
```

### Response (Error - Not Found)
```json
{
  "success": false,
  "error": {
    "code": "CONCERT_NOT_FOUND",
    "message": "ì½˜ì„œíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"
  }
}
```

### Response (Error - Server Error)
```json
{
  "success": false,
  "error": {
    "code": "INTERNAL_SERVER_ERROR",
    "message": "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"
  }
}
```

## UI/UX Requirements

### Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header (ë¡œê³ , ê²€ìƒ‰, ë¡œê·¸ì¸/í”„ë¡œí•„)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   ì½˜ì„œíŠ¸ ì´ë¯¸ì§€ (16:9)            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  ì œë¯¸ë‹ˆ ì½˜ì„œíŠ¸ 2025  [íŒë§¤ì¤‘] [â™¡ ì°œí•˜ê¸°]â”‚
â”‚  GEMINI                                 â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚                                         â”‚
â”‚  ğŸ“… 2025ë…„ 6ì›” 15ì¼ ~ 6ì›” 15ì¼         â”‚
â”‚  â° 150ë¶„                               â”‚
â”‚  ğŸ“ ì˜¬ë¦¼í”½ê³µì› ì²´ì¡°ê²½ê¸°ì¥               â”‚
â”‚     ì„œìš¸ì‹œ ì†¡íŒŒêµ¬ ì˜¬ë¦¼í”½ë¡œ 424          â”‚
â”‚  ğŸ‘¥ 12ì„¸ ì´ìƒ                           â”‚
â”‚                                         â”‚
â”‚  ê³µì—° ì†Œê°œ                              â”‚
â”‚  ì œë¯¸ë‹ˆì˜ íŠ¹ë³„í•œ 2025ë…„ ì½˜ì„œíŠ¸ì…ë‹ˆë‹¤... â”‚
â”‚                                         â”‚
â”‚  ì¢Œì„ ë“±ê¸‰ ì •ë³´                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸŸ¡ VIPì„    150,000ì›            â”‚ â”‚
â”‚  â”‚    ì „ì²´ 100ì„ / ì”ì—¬ 42ì„         â”‚ â”‚
â”‚  â”‚ ğŸ”´ Rì„      120,000ì›            â”‚ â”‚
â”‚  â”‚    ì „ì²´ 200ì„ / ì”ì—¬ 180ì„        â”‚ â”‚
â”‚  â”‚ ğŸ”µ Sì„       90,000ì›            â”‚ â”‚
â”‚  â”‚    ì „ì²´ 300ì„ / ì”ì—¬ 256ì„        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚          [ì˜ˆë§¤í•˜ê¸°] ë²„íŠ¼                â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Interactive Elements

**ì°œí•˜ê¸° ë²„íŠ¼**
- ë¹„ë¡œê·¸ì¸: íšŒìƒ‰ í•˜íŠ¸ ì•„ì´ì½˜, í´ë¦­ ì‹œ ë¡œê·¸ì¸ ëª¨ë‹¬
- ë¡œê·¸ì¸ (ì°œ X): ë¹ˆ í•˜íŠ¸ ì•„ì´ì½˜, í´ë¦­ ì‹œ ì°œ ì¶”ê°€
- ë¡œê·¸ì¸ (ì°œ O): ì±„ì›Œì§„ í•˜íŠ¸ ì•„ì´ì½˜, í´ë¦­ ì‹œ ì°œ ì œê±°

**ì˜ˆë§¤í•˜ê¸° ë²„íŠ¼**
- ê¸°ë³¸: Primary ìƒ‰ìƒ, í¬ê²Œ í‘œì‹œ
- ë§¤ì§„: ë¹„í™œì„±í™”, "ë§¤ì§„" í…ìŠ¤íŠ¸ í‘œì‹œ
- í´ë¦­: ì¢Œì„ ì„ íƒ í˜ì´ì§€ë¡œ ì´ë™

### Loading State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   [ì´ë¯¸ì§€ ìŠ¤ì¼ˆë ˆí†¤]               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚  [ì œëª© ìŠ¤ì¼ˆë ˆí†¤]            [ë²„íŠ¼ ìŠ¤ì¼ˆë ˆí†¤]â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”‚
â”‚  [ì •ë³´ ìŠ¤ì¼ˆë ˆí†¤ ë¼ì¸ 1]                â”‚
â”‚  [ì •ë³´ ìŠ¤ì¼ˆë ˆí†¤ ë¼ì¸ 2]                â”‚
â”‚  ...                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Error State
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            âš ï¸                           â”‚
â”‚                                         â”‚
â”‚      ì½˜ì„œíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤          â”‚
â”‚                                         â”‚
â”‚   ìš”ì²­í•˜ì‹  ì½˜ì„œíŠ¸ê°€ ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜     â”‚
â”‚   ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.                       â”‚
â”‚                                         â”‚
â”‚        [ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°]              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Handling & Feedback

### Client-Side Validation
- URL íŒŒë¼ë¯¸í„° ê²€ì¦: concert_idê°€ UUID í˜•ì‹ì¸ì§€ í™•ì¸
- í˜•ì‹ ì˜¤ë¥˜ ì‹œ ì¦‰ì‹œ 404 í˜ì´ì§€ í‘œì‹œ

### Network Error Handling
```typescript
try {
  const concert = await fetchConcertDetail(concertId);
  // ì„±ê³µ ì²˜ë¦¬
} catch (error) {
  if (error.code === 'CONCERT_NOT_FOUND') {
    // 404 í˜ì´ì§€ í‘œì‹œ
    router.push('/404');
  } else if (error.code === 'UNAUTHORIZED') {
    // ì¸ì¦ ë§Œë£Œ, ì°œ ê¸°ëŠ¥ë§Œ ë¹„í™œì„±í™”
    showLoginPrompt();
  } else {
    // ì¼ë°˜ ì˜¤ë¥˜
    showErrorToast('ì½˜ì„œíŠ¸ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
  }
}
```

### User Feedback
- **Loading**: ìŠ¤ì¼ˆë ˆí†¤ UIë¡œ ë¡œë”© ìƒíƒœ í‘œì‹œ
- **Success**: ìì—°ìŠ¤ëŸ¬ìš´ í˜ì´ì§€ ì „í™˜ ë° ë°ì´í„° í‘œì‹œ
- **Error**:
  - Toast ë©”ì‹œì§€ (ì¼ì‹œì  ì˜¤ë¥˜)
  - ì „ì²´ í˜ì´ì§€ ì—ëŸ¬ í™”ë©´ (ì¹˜ëª…ì  ì˜¤ë¥˜)
  - ì¬ì‹œë„ ë²„íŠ¼ ì œê³µ

### Retry Logic
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ìë™ ì¬ì‹œë„ (ìµœëŒ€ 2íšŒ)
- ì‹¤íŒ¨ ì‹œ ìˆ˜ë™ ì¬ì‹œë„ ë²„íŠ¼ ì œê³µ

## Implementation Notes

### Frontend (React Query)
```typescript
// hooks/useConcertDetail.ts
export const useConcertDetail = (concertId: string) => {
  return useQuery({
    queryKey: ['concert', concertId],
    queryFn: () => apiClient.get(`/api/concerts/${concertId}`),
    retry: 2,
    staleTime: 1000 * 60 * 5, // 5ë¶„
  });
};
```

### Backend (Hono)
```typescript
// features/concert/backend/route.ts
app.get('/api/concerts/:id', async (c) => {
  const concertId = c.req.param('id');
  const userId = c.get('userId'); // ì¸ì¦ëœ ê²½ìš°ì—ë§Œ ì¡´ì¬

  const concert = await getConcertDetailService(c.get('supabase'), {
    concertId,
    userId,
  });

  if (!concert) {
    return c.json({ error: 'CONCERT_NOT_FOUND', message: 'ì½˜ì„œíŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' }, 404);
  }

  return c.json({ success: true, data: concert });
});
```

### Database Queries
```sql
-- ì½˜ì„œíŠ¸ ê¸°ë³¸ ì •ë³´
SELECT * FROM concerts WHERE id = $1;

-- ì¢Œì„ ë“±ê¸‰ ì •ë³´
SELECT
  csc.id,
  csc.name,
  csc.display_color,
  csc.price,
  COUNT(cs.id) as total_seats,
  COUNT(cs.id) FILTER (
    WHERE NOT EXISTS (
      SELECT 1 FROM reservation_order_seats ros
      WHERE ros.seat_id = cs.id AND ros.is_active = true
    )
  ) as available_seats
FROM concert_seat_categories csc
LEFT JOIN concert_seats cs ON cs.category_id = csc.id
WHERE csc.concert_id = $1
GROUP BY csc.id;

-- ì°œ ì—¬ë¶€ (ë¡œê·¸ì¸ ì‹œ)
SELECT EXISTS(
  SELECT 1 FROM favorite_concerts
  WHERE user_id = $1 AND concert_id = $2
);
```

## Related Use Cases
- **UC-001**: í‚¤ì›Œë“œ ê²€ìƒ‰ (ì´ì „ ë‹¨ê³„)
- **UC-003**: ì°œí•˜ê¸° (íšŒì›) (ì—°ê´€ ê¸°ëŠ¥)
- **UC-005**: ì¢Œì„ ì„ íƒ (ë‹¤ìŒ ë‹¨ê³„)

## Acceptance Criteria
- [ ] ì½˜ì„œíŠ¸ ìƒì„¸ ì •ë³´ê°€ ì •í™•í•˜ê²Œ í‘œì‹œë¨
- [ ] ì¢Œì„ ë“±ê¸‰ë³„ ì”ì—¬ ì¢Œì„ ìˆ˜ê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜ë¨
- [ ] ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ì°œí•˜ê¸° ë²„íŠ¼ì´ ì ì ˆíˆ ë™ì‘í•¨
- [ ] ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì½˜ì„œíŠ¸ ì ‘ê·¼ ì‹œ 404 ì²˜ë¦¬ë¨
- [ ] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ê°€ í‘œì‹œë¨
- [ ] ë¡œë”© ì¤‘ ìŠ¤ì¼ˆë ˆí†¤ UIê°€ í‘œì‹œë¨
- [ ] ëª¨ë°”ì¼/ë°ìŠ¤í¬íƒ‘ì—ì„œ ëª¨ë‘ ì •ìƒ ì‘ë™í•¨
- [ ] ë§¤ì§„ëœ ì½˜ì„œíŠ¸ì˜ ê²½ìš° ì˜ˆë§¤ ë²„íŠ¼ì´ ë¹„í™œì„±í™”ë¨
